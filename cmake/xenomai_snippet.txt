find_package(Xenomai)
if(Xenomai_FOUND)

    #finding cflags based on xeno-config
    execute_process (
    COMMAND bash -c "xeno-config --skin=native --cflags"
    OUTPUT_STRIP_TRAILING_WHITESPACE
    OUTPUT_VARIABLE cflags
    )

    #finding ldflags based on xeno-config
    execute_process (
    COMMAND bash -c "xeno-config --skin=native --ldflags"
    OUTPUT_STRIP_TRAILING_WHITESPACE
    OUTPUT_VARIABLE ldflags
    )

    message(${cflags})
    message(${ldflags})

    set(CMAKE_C_FLAGS "${CMAKE_CXX_FLAGS} ${cflags} ${ldflags}")
    
endif(Xenomai_FOUND)
